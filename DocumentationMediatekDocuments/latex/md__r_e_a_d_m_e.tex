\chapter{Mediatek\+Documents}
\hypertarget{md__r_e_a_d_m_e}{}\label{md__r_e_a_d_m_e}\index{MediatekDocuments@{MediatekDocuments}}
\label{md__r_e_a_d_m_e_autotoc_md181}%
\Hypertarget{md__r_e_a_d_m_e_autotoc_md181}%
Cette application permet de gérer les documents (livres, DVD, revues) d\textquotesingle{}une médiathèque. Elle a été codée en C\# sous Visual Studio 2019. C\textquotesingle{}est une application de bureau, prévue d\textquotesingle{}être installée sur plusieurs postes accédant à la même base de données.~\newline
 L\textquotesingle{}application exploite une API REST pour accéder à la BDD My\+SQL. Des explications sont données plus loin, ainsi que le lien de récupération. \hypertarget{md__r_e_a_d_m_e_autotoc_md182}{}\doxysection{\texorpdfstring{Présentation}{Présentation}}\label{md__r_e_a_d_m_e_autotoc_md182}
Actuellement l\textquotesingle{}application est partiellement codée. Voici les fonctionnalités actuellement opérationnelles \+: recherches et affichage d\textquotesingle{}informations sur les documents de la médiathèque (livres, DVD, revues), réception de nouveaux numéros de revues.~\newline
  ~\newline
L\textquotesingle{}application ne comporte qu\textquotesingle{}une seule fenêtre divisée en plusieurs onglets. \hypertarget{md__r_e_a_d_m_e_autotoc_md183}{}\doxysection{\texorpdfstring{Les différents onglets}{Les différents onglets}}\label{md__r_e_a_d_m_e_autotoc_md183}
\hypertarget{md__r_e_a_d_m_e_autotoc_md184}{}\doxysubsection{\texorpdfstring{Onglet 1 \+: Livres}{Onglet 1 \+: Livres}}\label{md__r_e_a_d_m_e_autotoc_md184}
Cet onglet présente la liste des livres, triée par défaut sur le titre.~\newline
 La liste comporte les informations suivantes \+: titre, auteur, collection, genre, public, rayon.  \hypertarget{md__r_e_a_d_m_e_autotoc_md185}{}\doxysubsubsection{\texorpdfstring{Recherches}{Recherches}}\label{md__r_e_a_d_m_e_autotoc_md185}
{\bfseries{Par le titre \+:}} Il est possible de rechercher un ou plusieurs livres par le titre. La saisie dans la zone de recherche se fait en autocomplétions sans tenir compte de la casse. Seuls les livres concernés apparaissent dans la liste.~\newline
 {\bfseries{Par le numéro \+:}} il est possible de saisir un numéro et, en cliquant sur "{}\+Rechercher"{}, seul le livre concerné apparait dans la liste (ou un message d\textquotesingle{}erreur si le livre n\textquotesingle{}est pas trouvé, avec la liste remplie à nouveau). \hypertarget{md__r_e_a_d_m_e_autotoc_md186}{}\doxysubsubsection{\texorpdfstring{Filtres}{Filtres}}\label{md__r_e_a_d_m_e_autotoc_md186}
Il est possible d\textquotesingle{}appliquer un filtre (un seul à la fois) sur une de ces 3 catégories \+: genre, public, rayon.~\newline
 Un combo par catégorie permet de sélectionner un item. Seuls les livres correspondant à l\textquotesingle{}item sélectionné, apparaissent dans la liste (par exemple, en choisissant le genre "{}\+Policier"{}, seuls les livres de genre "{}\+Policier"{} apparaissent).~\newline
 Le fait de sélectionner un autre filtre ou de faire une recherche, annule le filtre actuel.~\newline
 Il est possible aussi d\textquotesingle{}annuler le filtre en cliquant sur une des croix. \hypertarget{md__r_e_a_d_m_e_autotoc_md187}{}\doxysubsubsection{\texorpdfstring{Tris}{Tris}}\label{md__r_e_a_d_m_e_autotoc_md187}
Le fait de cliquer sur le titre d\textquotesingle{}une des colonnes de la liste des livres, permet de trier la liste par rapport à la colonne choisie. \hypertarget{md__r_e_a_d_m_e_autotoc_md188}{}\doxysubsubsection{\texorpdfstring{Affichage des informations détaillées}{Affichage des informations détaillées}}\label{md__r_e_a_d_m_e_autotoc_md188}
Si la liste des livres contient des éléments, par défaut il y en a toujours un de sélectionné. Il est aussi possible de sélectionner une ligne (donc un livre) en cliquant n\textquotesingle{}importe où sur la ligne.~\newline
 La partie basse de la fenêtre affiche les informations détaillées du livre sélectionné (numéro de document, code ISBN, titre, auteur(e), collection, genre, public, rayon, chemin de l\textquotesingle{}image) ainsi que l\textquotesingle{}image. \hypertarget{md__r_e_a_d_m_e_autotoc_md189}{}\doxysubsection{\texorpdfstring{Onglet 2 \+: DVD}{Onglet 2 \+: DVD}}\label{md__r_e_a_d_m_e_autotoc_md189}
Cet onglet présente la liste des DVD, triée par titre.~\newline
 La liste comporte les informations suivantes \+: titre, durée, réalisateur, genre, public, rayon.~\newline
 Le fonctionnement est identique à l\textquotesingle{}onglet des livres.~\newline
 La seule différence réside dans certaines informations détaillées, spécifiques aux DVD \+: durée (à la place de ISBN), réalisateur (à la place de l\textquotesingle{}auteur), synopsis (à la place de collection). \hypertarget{md__r_e_a_d_m_e_autotoc_md190}{}\doxysubsection{\texorpdfstring{Onglet 3 \+: Revues}{Onglet 3 \+: Revues}}\label{md__r_e_a_d_m_e_autotoc_md190}
Cet onglet présente la liste des revues, triées par titre.~\newline
 La liste comporte les informations suivantes \+: titre, périodicité, délai mise à dispo, genre, public, rayon.~\newline
 Le fonctionnement est identique à l\textquotesingle{}onglet des livres.~\newline
 La seule différence réside dans certaines informations détaillées, spécifiques aux revues \+: périodicité (à la place de l\textquotesingle{}auteur), délai mise à dispo (à la place de collection). \hypertarget{md__r_e_a_d_m_e_autotoc_md191}{}\doxysubsection{\texorpdfstring{Onglet 4 \+: Parutions des revues}{Onglet 4 \+: Parutions des revues}}\label{md__r_e_a_d_m_e_autotoc_md191}
Cet onglet permet d\textquotesingle{}enregistrer la réception de nouvelles parutions d\textquotesingle{}une revue.~\newline
 Il se décompose en 2 parties (groupbox). \hypertarget{md__r_e_a_d_m_e_autotoc_md192}{}\doxysubsubsection{\texorpdfstring{Partie "{}\+Recherche revue"{}}{Partie "{}\+Recherche revue"{}}}\label{md__r_e_a_d_m_e_autotoc_md192}
Cette partie permet, à partir de la saisie d\textquotesingle{}un numéro de revue (puis en cliquant sur le bouton "{}\+Rechercher"{}), d\textquotesingle{}afficher toutes les informations de la revue (comme dans l\textquotesingle{}onglet précédent), ainsi que son image principale en petit, avec en plus la liste des parutions déjà reçues (numéro, date achat, chemin photo). Sur la sélection d\textquotesingle{}une ligne dans la liste des parutions, la photo de la parution correspondante s\textquotesingle{}affiche à droite.~\newline
 Dès qu\textquotesingle{}un numéro de revue est reconnu et ses informations affichées, la seconde partie ("{}\+Nouvelle parution réceptionnée pour cette revue"{}) devient accessible.~\newline
 Si une modification est apportée au numéro de la revue, toutes les zones sont réinitialisées et la seconde partie est rendue inaccessible, tant que le bouton "{}\+Rechercher"{} n\textquotesingle{}est pas utilisé. \hypertarget{md__r_e_a_d_m_e_autotoc_md193}{}\doxysubsubsection{\texorpdfstring{Partie "{}\+Nouvelle parution réceptionnée pour cette revue"{}}{Partie "{}\+Nouvelle parution réceptionnée pour cette revue"{}}}\label{md__r_e_a_d_m_e_autotoc_md193}
Cette partie n\textquotesingle{}est accessible que si une revue a bien été trouvée dans la première partie.~\newline
 Il est possible alors de réceptionner une nouvelle parution en saisissant son numéro, en sélectionnant une date (date du jour proposée par défaut) et en cherchant l\textquotesingle{}image correspondante (optionnel) qui doit alors s\textquotesingle{}afficher à droite.~\newline
 Le clic sur "{}\+Valider la réception"{} va permettre d\textquotesingle{}ajouter un tuple dans la table Exemplaire de la BDD. La parution correspondante apparaitra alors automatiquement dans la liste des parutions et les zones de la partie "{}\+Nouvelle parution réceptionnée pour cette revue"{} seront réinitialisées.~\newline
 Si le numéro de la parution existe déjà, il n’est pas ajouté et un message est affiché.  \hypertarget{md__r_e_a_d_m_e_autotoc_md194}{}\doxysection{\texorpdfstring{La base de données}{La base de données}}\label{md__r_e_a_d_m_e_autotoc_md194}
La base de données \textquotesingle{}mediatek86 \textquotesingle{} est au format My\+SQL.~\newline
 Voici sa structure \+:~\newline
  ~\newline
On distingue les documents "{}génériques"{} (ce sont les entités Document, Revue, Livres-\/\+DVD, Livre et DVD) des documents "{}physiques"{} qui sont les exemplaires de livres ou de DVD, ou bien les numéros d’une revue ou d’un journal.~\newline
 Chaque exemplaire est numéroté à l’intérieur du document correspondant, et a donc un identifiant relatif. Cet identifiant est réel \+: ce n\textquotesingle{}est pas un numéro automatique. ~\newline
 Un exemplaire est caractérisé par \+:~\newline
 . un état d’usure, les différents états étant mémorisés dans la table Etat ;~\newline
 . sa date d’achat ou de parution dans le cas d’une revue ;~\newline
 . un lien vers le fichier contenant sa photo de couverture de l\textquotesingle{}exemplaire, renseigné uniquement pour les exemplaires des revues, donc les parutions (chemin complet) ; ~\newline
 Un document a un titre (titre de livre, titre de DVD ou titre de la revue), concerne une catégorie de public, possède un genre et est entreposé dans un rayon défini. Les genres, les catégories de public et les rayons sont gérés dans la base de données. Un document possède aussi une image dont le chemin complet est mémorisé. Même les revues peuvent avoir une image générique, en plus des photos liées à chaque exemplaire (parution).~\newline
 Une revue est un document, d’où le lien de spécialisation entre les 2 entités. Une revue est donc identifiée par son numéro de document. Elle a une périodicité (quotidien, hebdomadaire, etc.) et un délai de mise à disposition (temps pendant lequel chaque exemplaire est laissé en consultation). Chaque parution (exemplaire) d\textquotesingle{}une revue n\textquotesingle{}est disponible qu\textquotesingle{}en un seul "{}exemplaire"{}.~\newline
 Un livre a aussi pour identifiant son numéro de document, possède un code ISBN, un auteur et peut faire partie d’une collection. Les auteurs et les collections ne sont pas gérés dans des tables séparées (ce sont de simples champs textes dans la table Livre).~\newline
 De même, un DVD est aussi identifié par son numéro de document, et possède un synopsis, un réalisateur et une durée. Les réalisateurs ne sont pas gérés dans une table séparée (c’est un simple champ texte dans la table DVD). Enfin, 3 tables permettent de mémoriser les données concernant les commandes de livres ou DVD et les abonnements. Une commande est effectuée à une date pour un certain montant. Un abonnement est une commande qui a pour propriété complémentaire la date de fin de l’abonnement \+: il concerne une revue. Une commande de livre ou DVD a comme caractéristique le nombre d’exemplaires commandé et concerne donc un livre ou un DVD.~\newline
 ~\newline
 La base de données est remplie de quelques exemples pour pouvoir tester son application. Dans les champs image (de Document) et photo (de Exemplaire) doit normalement se trouver le chemin complet vers l\textquotesingle{}image correspondante. Pour les tests, vous devrez créer un dossier, le remplir de quelques images et mettre directement les chemins dans certains tuples de la base de données qui, pour le moment, ne contient aucune image.~\newline
 Lorsque l\textquotesingle{}application sera opérationnelle, c\textquotesingle{}est le personnel de la médiathèque qui sera en charge de saisir les informations des documents. \hypertarget{md__r_e_a_d_m_e_autotoc_md195}{}\doxysection{\texorpdfstring{L\textquotesingle{}API REST}{L\textquotesingle{}API REST}}\label{md__r_e_a_d_m_e_autotoc_md195}
L\textquotesingle{}accès à la BDD se fait à travers une API REST protégée par une authentification basique.~\newline
 Le code de l\textquotesingle{}API se trouve ici \+:~\newline
 \href{https://github.com/CNED-SLAM/rest_mediatekdocuments}{\texttt{ https\+://github.\+com/\+CNED-\/\+SLAM/rest\+\_\+mediatekdocuments}}~\newline
 avec toutes les explications pour l\textquotesingle{}utiliser (dans le readme). \hypertarget{md__r_e_a_d_m_e_autotoc_md196}{}\doxysection{\texorpdfstring{Installation de l\textquotesingle{}application}{Installation de l\textquotesingle{}application}}\label{md__r_e_a_d_m_e_autotoc_md196}
Ce mode opératoire permet d\textquotesingle{}installer l\textquotesingle{}application pour pouvoir travailler dessus.~\newline

\begin{DoxyItemize}
\item Installer Visual Studio 2019 entreprise et les extension Specflow et newtonsoft.\+json (pour ce dernier, voir l\textquotesingle{}article "{}\+Accéder à une API REST à partir d\textquotesingle{}une application C\#"{} dans le wiki de ce dépôt \+: consulter juste le début pour la configuration, car la suite permet de comprendre le code existant).~\newline

\item Télécharger le code et le dézipper puis renommer le dossier en "{}mediatekdocuments"{}.~\newline

\item Récupérer et installer l\textquotesingle{}API REST nécessaire (\href{https://github.com/CNED-SLAM/rest_mediatekdocuments}{\texttt{ https\+://github.\+com/\+CNED-\/\+SLAM/rest\+\_\+mediatekdocuments}}) ainsi que la base de données (les explications sont données dans le readme correspondant). 
\end{DoxyItemize}